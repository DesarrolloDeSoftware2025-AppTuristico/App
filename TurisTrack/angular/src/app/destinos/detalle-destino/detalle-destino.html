<div class="container mt-5" *ngIf="loading">
  <div class="d-flex justify-content-center">
    <div class="spinner-border text-primary" role="status"></div>
  </div>
</div>

<div class="container mt-4" *ngIf="!loading && destino">
  
  <div class="card shadow-lg border-0 overflow-hidden">
    <div class="bg-primary text-white p-5 text-center">
      <h1 class="display-4 fw-bold">{{ destino.nombre }}</h1>
      <p class="fs-3"><i class="fa fa-flag me-2"></i> {{ destino.pais }}</p>
    </div>

    <div class="card-body p-4">
      <div class="row">
        <div class="col-md-7">
          <h4 class="mb-4 text-secondary border-bottom pb-2">Información del Destino</h4>
          
          <div class="row mb-3">
              <div class="col-sm-4 fw-bold">Región:</div>
              <div class="col-sm-8">{{ destino.region || 'No especificada' }} ({{ destino.codigoRegion }})</div>
          </div>
          <div class="row mb-3">
              <div class="col-sm-4 fw-bold">Población:</div>
              <div class="col-sm-8">{{ destino.poblacion | number }} habitantes</div>
          </div>
          <div class="row mb-3">
              <div class="col-sm-4 fw-bold">Zona Horaria:</div>
              <div class="col-sm-8">{{ destino.zonaHoraria }}</div>
          </div>
          <div class="row mb-3">
              <div class="col-sm-4 fw-bold">Coordenadas:</div>
              <div class="col-sm-8">Lat: {{ destino.latitud }}, Long: {{ destino.longitud }}</div>
          </div>
          <div class="row mb-3">
              <div class="col-sm-4 fw-bold">Elevación:</div>
              <div class="col-sm-8">{{ destino.metrosDeElevacion }} metros</div>
          </div>
        </div>

        <div class="col-md-5">
            <div class="card bg-light border-0 h-100">
                <div class="card-body d-flex flex-column justify-content-center align-items-center text-center p-4">
                  <i class="fa fa-map-marked-alt text-success mb-3" style="font-size: 5rem;"></i>
                  <h5 class="mb-3">¿Te interesa planear un viaje aquí?</h5>
                  <p class="text-muted mb-4">Guarda este destino en tu base de datos local para gestionarlo, crear reseñas o agregarlo a favoritos.</p>
                  
                    <button class="btn btn-lg w-100 shadow fw-bold" 
                        [ngClass]="destino.estaGuardado ? 'btn-secondary' : 'btn-success'"
                        (click)="!destino.estaGuardado && guardarEnBaseDeDatos()" 
                        [disabled]="guardando || destino.estaGuardado">
                    
                        <span *ngIf="guardando" class="spinner-border spinner-border-sm me-2"></span>
                        
                        <span *ngIf="!guardando && !destino.estaGuardado">
                            <i class="fa fa-save me-2"></i> Guardar Destino
                        </span>

                        <span *ngIf="!guardando && destino.estaGuardado">
                            <i class="fa fa-check-circle me-2"></i> Destino Guardado
                        </span>

                    </button>

                    <small class="text-muted mt-2 text-center d-block" *ngIf="destino.estaGuardado">
                        Este destino ya se encuentra en tu lista personal.
                    </small>
                </div>
            </div>
        </div>
      </div>
    </div>
    
    <div class="card-footer bg-white border-0 py-3">
        <button class="btn btn-outline-secondary" onclick="history.back()">
            <i class="fa fa-arrow-left me-2"></i> Volver al listado
        </button>
    </div>
  </div>
</div>